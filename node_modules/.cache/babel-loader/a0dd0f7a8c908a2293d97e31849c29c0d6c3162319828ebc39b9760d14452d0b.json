{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport { BooksContext } from '../../context/BooksContext';\nimport { AuthContext } from '../../context/AuthContext';\nimport editValidation from '../../components/edit-page/editValidation';\nimport useGetById from '../hooks-requests/useGetById';\nimport { useParams } from 'react-router-dom';\nexport default function useFormEdit(bookId) {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    books,\n    bookUpdate\n  } = useContext(BooksContext);\n  const {\n    user\n  } = useContext(AuthContext);\n  const [formError, setFormError] = useState({});\n  const currentBook = books.find(x => x.id === bookId);\n  console.log(books.map(x => x.id), id);\n  const [formValue, setFormValue] = useState({\n    title: '',\n    author: '',\n    genre: '',\n    rating: '',\n    image: '',\n    description: '',\n    ownerId: user.id\n  });\n  function onChange(e) {\n    setFormValue(oldValue => ({\n      ...oldValue,\n      [e.target.name]: e.target.value\n    }));\n  }\n  function onSubmit(event) {\n    event.preventDefault();\n    const error = editValidation(formValue);\n    setFormError(error);\n    if (Object.values(error).length === 0) {\n      bookUpdate(bookId, formValue);\n    }\n  }\n  return {\n    formValue,\n    formError,\n    onChange,\n    onSubmit\n  };\n}\n_s(useFormEdit, \"QVeCrTwLlGciE+f5mQVvUZsPZAo=\", false, function () {\n  return [useParams];\n});","map":{"version":3,"names":["React","useContext","useState","BooksContext","AuthContext","editValidation","useGetById","useParams","useFormEdit","bookId","_s","id","books","bookUpdate","user","formError","setFormError","currentBook","find","x","console","log","map","formValue","setFormValue","title","author","genre","rating","image","description","ownerId","onChange","e","oldValue","target","name","value","onSubmit","event","preventDefault","error","Object","values","length"],"sources":["D:/Book Talk/client/src/custom-hooks/hooks-forms/useFormEdit.js"],"sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { BooksContext } from '../../context/BooksContext';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport editValidation from '../../components/edit-page/editValidation';\r\nimport useGetById from '../hooks-requests/useGetById';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport default function useFormEdit(bookId) {\r\n\r\n    const {id } =  useParams();\r\n\r\n    const { books, bookUpdate } = useContext(BooksContext);\r\n\r\n    const { user } = useContext(AuthContext);\r\n\r\n    const [formError, setFormError] = useState({});\r\n\r\n    const currentBook = books.find(x => x.id === bookId);\r\n\r\n  \r\n  console.log(books.map(x => x.id), id)\r\n\r\n    const [formValue, setFormValue] = useState({\r\n        title: '',\r\n        author: '',\r\n        genre: '',\r\n        rating: '',\r\n        image: '',\r\n        description: '',\r\n        ownerId: user.id\r\n    });\r\n\r\n    function onChange(e) {\r\n        setFormValue(oldValue => ({\r\n            ...oldValue,\r\n            [e.target.name]: e.target.value\r\n        }));\r\n    }\r\n\r\n    function onSubmit(event) {\r\n        event.preventDefault();\r\n        const error = editValidation(formValue);\r\n        setFormError(error);\r\n\r\n        if (Object.values(error).length === 0) {\r\n            bookUpdate(bookId,  formValue);\r\n        }\r\n    }\r\n\r\n    return { formValue, formError, onChange, onSubmit };\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,YAAY,QAAQ,4BAA4B;AACzD,SAASC,WAAW,QAAQ,2BAA2B;AACvD,OAAOC,cAAc,MAAM,2CAA2C;AACtE,OAAOC,UAAU,MAAM,8BAA8B;AACrD,SAASC,SAAS,QAAQ,kBAAkB;AAE5C,eAAe,SAASC,WAAWA,CAACC,MAAM,EAAE;EAAAC,EAAA;EAExC,MAAM;IAACC;EAAG,CAAC,GAAIJ,SAAS,CAAC,CAAC;EAE1B,MAAM;IAAEK,KAAK;IAAEC;EAAW,CAAC,GAAGZ,UAAU,CAACE,YAAY,CAAC;EAEtD,MAAM;IAAEW;EAAK,CAAC,GAAGb,UAAU,CAACG,WAAW,CAAC;EAExC,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE9C,MAAMe,WAAW,GAAGL,KAAK,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACR,EAAE,KAAKF,MAAM,CAAC;EAGtDW,OAAO,CAACC,GAAG,CAACT,KAAK,CAACU,GAAG,CAACH,CAAC,IAAIA,CAAC,CAACR,EAAE,CAAC,EAAEA,EAAE,CAAC;EAEnC,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC;IACvCuB,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAE,EAAE;IACTC,WAAW,EAAE,EAAE;IACfC,OAAO,EAAEjB,IAAI,CAACH;EAClB,CAAC,CAAC;EAEF,SAASqB,QAAQA,CAACC,CAAC,EAAE;IACjBT,YAAY,CAACU,QAAQ,KAAK;MACtB,GAAGA,QAAQ;MACX,CAACD,CAAC,CAACE,MAAM,CAACC,IAAI,GAAGH,CAAC,CAACE,MAAM,CAACE;IAC9B,CAAC,CAAC,CAAC;EACP;EAEA,SAASC,QAAQA,CAACC,KAAK,EAAE;IACrBA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,KAAK,GAAGpC,cAAc,CAACkB,SAAS,CAAC;IACvCP,YAAY,CAACyB,KAAK,CAAC;IAEnB,IAAIC,MAAM,CAACC,MAAM,CAACF,KAAK,CAAC,CAACG,MAAM,KAAK,CAAC,EAAE;MACnC/B,UAAU,CAACJ,MAAM,EAAGc,SAAS,CAAC;IAClC;EACJ;EAEA,OAAO;IAAEA,SAAS;IAAER,SAAS;IAAEiB,QAAQ;IAAEM;EAAS,CAAC;AACvD;AAAC5B,EAAA,CA3CuBF,WAAW;EAAA,QAEhBD,SAAS;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}